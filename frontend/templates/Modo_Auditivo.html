<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auris - Asistente Académico Inclusivo</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/auditory_mode.css') }}">
</head>
<body>
    <div class="app-container">
        <!-- Barra lateral izquierda -->
        <div class="sidebar">
            <div class="logo-container">
                <img src="/static/assets/images/logo.png" alt="Logo de Auris" style="width: 99px; height: 98px;">
            </div>
            <!-- Botón hamburguesa -->
            <button id="menu-toggle" class="menu-toggle">☰ Menú</button>
            <nav class="main-nav">
                <button id="btn-inicio" class="nav-button">INICIO</button>
                <button id="btn-modo-visual" class="nav-button">MODO VISUAL</button>
                <button id="btn-modo-auditivo" class="nav-button active">MODO AUDITIVO</button>
                <button id="btn-biblioteca" class="nav-button">BIBLIOTECA</button>
                <button id="btn-configuracion" class="nav-button">CONFIGURACIÓN</button>
                <button id="btn-login" class="nav-button">CERRAR SESIÓN</button>
            </nav>
        </div>

        <!-- Contenido principal - Modo Auditivo -->
        <main class="main-content">
            <div class="auditory-mode-card">
                <div class="auditory-mode-header">
                    <h2>Asistente Auditivo</h2>
                    <p>Transcripción en tiempo real</p>
                </div>
                
                <div class="recording-section">
                    <div class="recording-controls">
                        <button class="record-btn" id="recordBtn">Grabar</button>
                        <button class="pause-btn" id="pauseBtn">Pausar</button>
                        <button class="stop-btn" id="stopBtn" disabled>Detener</button>
                    </div>
                    
                    <div class="audio-source">
                        <p>Fuente del audio:</p>
                        <div class="source-selection">
                            <span class="selected-source">Micrófono interno seleccionado</span>
                        </div>
                    </div>
                </div>
                
                <div class="transcription-section">
                    <h3>Transcripción</h3>
                    <textarea class="transcription-content" id="transcriptBox" placeholder="La transcripción aparecerá aquí mientras hablas..."></textarea>
                    
                    <!-- Botones de control -->
                    <div class="transcription-controls" style="margin-top: 15px; display: flex; gap: 10px; justify-content: space-between;">
                        <button class="btn-gray" id="btnlimpiar">Limpiar</button>
                        <button class="btn-save" id="saveBtn">Guardar Transcripción</button>
                    </div>
                    
                    <div class="audio-visualization">
                        <div class="waveform">
                            <!-- Las barras de ondas de audio -->
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                        </div>
                    </div>
                    
                    <!-- Contenedor para el audio grabado -->
                    <div class="save-audio">
                        <!-- El audio se agregará aquí dinámicamente -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="save-document-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Guardar Documento</h3>
                <button class="modal-close" id="close-save-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="document-title">Título del documento:</label>
                    <input type="text" id="document-title" maxlength="50" placeholder="Ingresa el título del documento">
                    <small class="char-counter">0/50 caracteres</small>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" id="cancel-save-btn">Cancelar</button>
                <button class="btn-save" id="confirm-save-btn">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Overlay del modal -->
    <div id="modal-overlay" class="modal-overlay" style="display: none;"></div>

    <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/audio_assistant.js') }}"></script>
</body>
</html>